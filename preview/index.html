<!DOCTYPE html>
<html>

<head>
  <title>P5 test</title>
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta charset="utf-8">

  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <script type="module">
    import p5 from '../src/app.js';

    const sketch = function (p) {
      let g, f,s,fragSrc;

      p.setup = function () {
        p.createCanvas(200, 200);
        g = p.createGraphics(200, 200);
        f = p.createGraphics(200, 200, p.WEBGL);
        fragSrc = `
         precision highp float;
         void main() {
           gl_FragColor = vec4(1.0, 1.0,  0.0, 1.0);
         }`;
         s = p.createFilterShader(fragSrc);
         p.fill('red');
         p.rect(0,0,100,100)
         p.filter(s);
         p.filter(p.POSTERIZE, 64);
        //  p.filter(p.POSTERIZE,64);
        //  p.filter(s);
        };
        
        p.draw = function () {
        p.image(f,0,0);
      };
    };

    new p5(sketch);
  </script>
</body>

</html>