<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Type Comparison</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background-color: #f0f0f0;
      }
      canvas {
        border: 1px solid #ccc;
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <h1>Type Comparison</h1>
    <div id="canvas-container"></div>

    <script type="module">
      import p5 from "../../../src/app.js";
      console.log("ok");

      const combinedTests = {
        textFont: ["with the default font", "with the default monospace font"],
        textAlign: [
          "all alignments with single word",
          "all alignments with single line",
          "all alignments with multi-lines and wrap word",
          "all alignments with multi-lines and wrap char",
          "all alignments with multi-line manual text",
        ],
        textStyle: ["all text styles"],
        textSize: ["text sizes comparison"],
        textLeading: ["text leading with different values"],
        textWidth: ["verify width of a string"],
      };
      let sketch = function (p) {
        p.preload = function () {
          Object.keys(combinedTests).forEach((suite) => {
            combinedTests[suite].forEach((testName) => {
              const v1Path = `../unit/visual/screenshots/Type.v1/${suite}/${testName}/000.png`;
              const v2Path = `../unit/visual/screenshots/Type.v2/${suite}/${testName}/000.png`;
              loadImage(v1Path, (img) => {
                createCanvas(img.width * 2 + 1, img.height);
                const v1Image = img;
                loadImage(v2Path, (img2) => {
                  const v2Image = img2;
                  drawImages(v1Image, v2Image);
                });
              });
            });
          });
        };

        function drawImages(v1Image, v2Image) {
          background(255);
          image(v1Image, 0, 0);
          stroke("red");
          line(v1Image.width, 0, v1Image.width, v1Image.height);
          image(v2Image, v1Image.width + 1, 0);
        }

        function setup() {}
      };

      let typographyLetterSketch = function (p) {
        p.setup = function () {
          let margin = 10;
          let gap = 46;
          let counter = 35;
          p.createCanvas(720, 320);
          p.background(0);
          p.textFont("Georgia");
          p.textSize(24);
          p.textStyle(p.BOLD);
          p.textAlign(p.CENTER, p.CENTER);
          p.translate(margin * 4, margin * 4);
          for (let y = 0; y < p.height - gap; y += gap) {
            for (let x = 0; x < p.width - gap; x += gap) {
              let letter = p.char(counter);
              if (letter === "P" || letter === "5") {
                p.fill(255, 204, 0);
              } else if (letter === "J" || letter === "S") {
                p.fill(204, 0, 255);
              } else {
                p.fill(255);
              }
              p.text(letter, x, y);
              counter++;
            }
          }
          p.translate(margin * -4, margin * -4);
        };
      };
      new p5(typographyLetterSketch, "canvas-container");
    </script>
  </body>
</html>
