<html>

<head>
  <meta charset="UTF-8">
  <!-- <script language="javascript" type="text/javascript" src="img/../../../../lib/p5.js"></script>
  <script language="javascript" type="text/javascript" src="img/sketch.js"></script> -->
  <style>
    body {
      padding: 0;
      margin: 0;
    }

    canvas {
      border: 1px solid #f0f0f0;
      display: block;
    }

    img {
      border: 1px solid #fff;
    }

    img.gray {
      border: 1px solid #eee;
    }

    img.red {
      border: 1px solid #f00;
    }

    div {
      margin: 100px 0px;
    }

    p.caption {
      margin: 2px;
      font-weight: bold;
    }
  </style>
</head>



<body>
  <script type="module">

    import p5 from '../../../src/app.js';
    let textHeightCheck = function (p) {
      p.setup = function () {
        p.createCanvas(1280, 540);
        p.background(235);

        p.fill(0);
        p.textSize(88);
        let s = "Let's get the height of this line.";
        let metrics = p.drawingContext.measureText(s);
        let x = 40, y = 200;
        p.text(s, x, y);
        p.noFill();
        p.circle(x, y, 10);
        p.line(x, 0, x, p.height);
        p.line(0, y, p.width, y);
        p.line(x + metrics.width, 0, x + metrics.width, p.height);

        let bbh = Math.abs(metrics.fontBoundingBoxAscent) + Math.abs(metrics.fontBoundingBoxDescent);
        let bbTop = y - Math.abs(metrics.fontBoundingBoxAscent);
        p.line(0, bbTop, p.width, bbTop);
        let bbBot = y + Math.abs(metrics.fontBoundingBoxDescent);
        p.line(0, bbBot, p.width, bbBot);

        p.stroke('red');
        let th = Math.abs(metrics.actualBoundingBoxAscent) + Math.abs(metrics.actualBoundingBoxDescent);
        let actualTop = y - Math.abs(metrics.actualBoundingBoxAscent);
        p.line(0, actualTop, p.width, actualTop);
        let actualBot = y + Math.abs(metrics.actualBoundingBoxDescent);
        p.line(0, actualBot, p.width, actualBot);

        p.fill('red');
        p.textSize(32);
        p.noStroke();
        p.text('tight-height: ' + th, 300, y + 60);

        p.fill(0);
        p.text('font-height: ' + bbh, 300, y + 100);
      }
    };
    new p5(textHeightCheck, 'textHeightCheck');

  </script>

  <div id='textHeightCheck'>
  </div>

</body>

</html>