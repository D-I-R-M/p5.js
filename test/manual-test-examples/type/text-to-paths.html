<html>

<head>
  <meta charset='UTF-8'>
  <style>
    body {
      padding: 0;
      margin: 0;
    }

    canvas {
      border: 1px solid #f0f0f0;
      display: block;
    }

    img {
      border: 1px solid #fff;
    }

    div {
      margin: 100px 0px;
    }
  </style>
</head>

<body>
  <script type='module'>
    import p5 from '../../../src/app.js';

    let sketch = function (p) {
      let paths, f;
      p.setup = async function () {
        p.createCanvas(750, 350);
        p.background(255);
        p.textFont(f = await p.loadFont('./font/LiberationSans-Bold.ttf'), 300);
        p.fill('#E92D55');

        paths = f.textToPaths('p5*js', 5, 250);

        if (0) {
          f.drawPaths(p.drawingContext, paths, { fill: '#E92D55' }); // DIRECT
        }
        else {
          drawPaths(paths, p); // USING P5: HANDLE INNER HOLES
        }

        f.textToPoints('p5*js', 5, 250, { sampleFactor: .1 }).forEach((pt, i) => {
          p.fill(0);
          p.circle(pt.x, pt.y, 5);
        });
      }
    }

    function drawPaths(commands, p) {
      for (let k = 0; k < commands.length; k++) {
        let { type, data } = commands[k];
        if (type === 'M') {
          if (false) {
            p.beginContour();
          }
          else {
            p.beginShape();
          }
          p.vertex(...data);
        } else if (type === 'L') {
          p.vertex(...data);
        } else if (type === 'C') {
          p.bezierVertex(...data);
        } else if (type === 'Q') {
          p.quadraticVertex(...data);
        } else if (type === 'Z') {
          if (false) {
            p.endContour();
          }
          p.endShape(p.CLOSE);
        }
      }
    }

    function clockwise(vertices) {
      function polygonArea() {
        let area = 0;
        for (let i = 0; i < vertices.length; i++) {
          j = (i + 1) % vertices.length;
          area += vertices[i].x * vertices[j].y;
          area -= vertices[j].x * vertices[i].y;
        }
        return area / 2;
      }
      return polygonArea() > 0;
    }

    new p5(sketch);
  </script>

</body>


</html>